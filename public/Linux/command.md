## Linuxコマンド

### find

- 再帰的に検索できる
``` text
> find <検索対象ディレクトリ> -name "<file名>"
> find ./ -name "test.txt"
```

### locate

- システムとして全体を検索可能
``` text
> updatedb  :Linux内のファイル配置をアップデートする
> locate test.txt
```

### ln

リンクを張るコマンド

``` text
> ln [オプション] <リンク元ファイル名> <リンク名>
```

- ハードリンク
  - ハードリンクとは、1つのファイルの実態に複数の名前を付ける機能。ハードリンクで追加されたファイル名は、どちらが本物名前で仮の名前などの区別が存在しない。
- シンボリックリンク
  - シンボリックリンクとは、リンク先のパス名が書かれた小さな特殊ファイルです。ハードリンクとは違い、リンク先がファイルの実体です。

[lnコマンドめっちゃ便利。](https://qiita.com/mitsumizo/items/3c266699d9ca7a712108)

## ulimit

- 各ユーザーが使用できるシステムリソースを制限するコマンド
- 特定のユーザーがシステム全体のリソースを過剰に消費することを防ぐ
- 基本的な使い方

  ``` bash
  # 現在の制限をすべて表示
  $ ulimit -a
  # ユーザーが生成できる最大プロセス数を10に制限
  $ ulimit -u 10
  # 作成可能なファイルサイズを100KBに制限
  $ ulimit -f 100
  # 仮想メモリの最大量を1000KBに制限
  $ ulimit -v 1000
  # 同時に開けるファイル数を10に制限
  $ ulimit -n 10
  ```
  これらの制限を超えるとエラーが発生する、例えば```Too many open files```や```file size limit exceeded```など。

### ソフトリミットとハードリミット

- ソフトリミット：現在のセッションで有効な制限値。ユーザー自身ではーろぢみっとの範囲内で変更可能
- ハードリミット：システム全体での最大値。一般ユーザーは減らすことはできるが、増やすことはできない。(rootユーザーのみ変更可能)

``` bash
# ソフトリミットを設定
$ ulimit -Sn 4000
# ハードリミットを設定
$ ulimit -Hn 8000
```

### 永続的な設定

- ```ulimit```の設定はデフォルトでは一時的です。永続化には```/etc/security/limits.conf```を編集する

``` text
# ユーザーやグループに制限を追加
@group_name hard nproc 20
username hard fsize 10000
```

この設定はログイン時にPAM認証を通じて適用される。ただしデーモンプロセスには適用されないため、systemdやinit.dスクリプトに直接設定を追加する必要がある。

### 注意点

- ulimitコマンドは現在のシェルセッションのみ影響する
- 設定を変更する際はシステム全体の安定性を考慮してください。

### 参考URL

- [ulimit](https://atmarkit.itmedia.co.jp/ait/articles/1908/01/news031.html)
- [システムアドレスの制限](https://qiita.com/hot_study_man/items/24e2bb953d4dca539c75)

## teeコマンド
- teeコマンドは、Linuxで標準出力をそのまま画面に表示しつつ、同時にファイルにも出力する便利なコマンドです。これにより、コマンドの実行結果を確認しながら記録することが可能です。

### 基本的な使い方

- 以下は、teeコマンドの基本的な使用例です。

``` bash
コマンド | tee ファイル名
```

この形式で、コマンドの出力が画面に表示されると同時に、指定したファイルに保存されます。

- 例: ファイルへの出力

``` bash
$ls /var | tee output.txt
```

このコマンドは、ls /varの結果を画面に表示しながら、output.txtに保存します。

### ファイルへの追記

- 既存のファイルに内容を追記したい場合は、-aオプションを使用します。

``` bash
> コマンド | tee -a ファイル名
```

- 例: 追記

``` bash
> echo "新しい行" | tee -a output.txt
```

これにより、output.txtに「新しい行」が追記されます。

### 標準エラー出力の保存

- 標準エラー出力も含めて保存するには、リダイレクトを使用します。

``` bash
> コマンド 2>&1 | tee ファイル名
```

- 例: 標準エラー出力の保存

``` bash
> ping 9999 2>&1 | tee error_log.txt
```

このコマンドは、エラー出力を含むすべての出力をerror_log.txtに保存します。

### sudoと組み合わ使用

- sudoで特権が必要なファイルに書き込む場合にもteeが役立ちます。

``` bash
> echo "0" | sudo tee /proc/sys/vm/swappiness
```

このコマンドは、swappinessの値を0に変更します。

### 複数ファイルへの出力

- 複数のファイルに同時に出力することも可能です。

``` bash
> コマンド | tee ファイル1 ファイル2
```

- 例: 複数ファイルへの出力

``` bash
> ls /var | tee file1.txt file2.txt
```

このコマンドは、ls /varの結果をfile1.txtとfile2.txtの両方に保存します。

### 注意点

- teeコマンドは標準出力をそのまま画面に表示するため、不要な出力を抑えたい場合は>/dev/nullを使用して捨てることができます。
- ファイルに追記する際は、-aオプションを忘れないようにしてください。
- teeコマンドは、ログの記録やデバッグに非常に便利なツールです。適切に活用することで、作業効率を大幅に向上させることができます。

### 参考URL

- [Linuxコマンド tee](https://www.ibm.com/docs/ja/aix/7.1.0?topic=t-tee-command)
- [Qiita](https://qiita.com/wnoguchi/items/2fc3ec11043d139dc6bb)