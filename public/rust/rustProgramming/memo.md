# Rustå‹•ã‹ã—ã¦ã¿ãŸ

## dockerfile

- æœ€å°æ§‹æˆã§

``` Dockerfile
FROM rust:1.68.0-alpine

# workãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ
WORKDIR /work
 
CMD ["/bin/sh"]

# sudo docker build -t rust_study:1.68 .
# sudo docker run --rm -it  -v "$(pwd)/src:/work" rust_study:1.68
# sudo docker container exec -it <ã‚³ãƒ³ãƒ†ãƒŠå> bash
# sudo docker container ls
```

- ubuntuã‚¤ãƒ¡ãƒ¼ã‚¸ã®å ´åˆ

``` Dockerfile
# å…¬å¼ã®Ubuntuã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ™ãƒ¼ã‚¹ã«ã™ã‚‹
FROM ubuntu:22.04

# é–‹ç™ºã«å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹
RUN apt-get update && \
    apt-get install -y curl build-essential && \
    rm -rf /var/lib/apt/lists/*

# Rustã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹
RUN curl https://sh.rustup.rs -sSf | sh -s -- -y --default-toolchain stable

# ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹
ENV PATH="/root/.cargo/bin:${PATH}"

# é–‹ç™ºç”¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã™ã‚‹
WORKDIR /app

# é–‹ç™ºç”¨ã®ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
# COPY . /app

# ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•æ™‚ã«Rustã®ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ï¼ˆå¿…è¦ã«å¿œã˜ã¦å¤‰æ›´ï¼‰
CMD ["/bin/bash"]

# sudo docker build -t rust_study:22.04 .
# sudo docker run --rm -it  -v "$(pwd)/src:/app" rust_study:22.04
# sudo docker container exec -it <ã‚³ãƒ³ãƒ†ãƒŠå> bash
# sudo docker container ls
```

## hello world

* main.rs

``` rust
fn main() {
    // ä¸–ç•Œã‚ˆã€ã“ã‚“ã«ã¡ã¯
    println!("Hello, world!");
}
```

## ãƒ“ãƒ«ãƒ‰

``` shell
> rustc main.rs
```

## å®Ÿè¡Œ

- Cã¨åŒã˜ã‚„ã‚“

``` shell
> ./main
```

## ãƒ—ãƒ¬ãƒªãƒ¥ãƒ¼ãƒ‰(æ¨™æº–ã§æ­è¼‰ã•ã‚Œã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª)

Rustã§ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒåˆ©ç”¨å¯èƒ½ã§ã‚ã‚‹ã€‚
æ¨™æº–ã®ã‚‚ã®ã‚’prelude(ãƒ—ãƒ¬ãƒªãƒ¥ãƒ¼ãƒ‰)ã¨å‘¼ã¶ã€‚å…¥ã£ã¦ã‚‹ã‚‚ã®ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚
â€»æ¨™æº–ã«å…¥ã‚‰ãªã„ã‚‚ã®ã¯useã§ã‚¹ã‚³ãƒ¼ãƒ—ã«å…¥ã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹.

``` text
std::marker::{Copy, Send, Sized, Sync, Unpin}
std::ops::{Drop, Fn, FnMut, FnOnce}
std::mem::drop
std::boxed::Box
std::borrow::ToOwned
std::clone::Clone
std::cmp::{PartialEq, PartialOrd, Eq, Ord}
std::convert::{AsRef, AsMut, Into, From}
std::iter::{Iterator, Extend, IntoIterator, DoubleEndedIterator, ExactSizeIterator}
std::option::Option::{self, Some, None}
std::result::Result::{self, Ok, Err}
std::vec::Vec
std::convert::{TryFrom, TryInto}
std::iter::FromIterator
```

[Rustã®Prelude(ãƒ—ãƒ¬ãƒªãƒ¥ãƒ¼ãƒ‰)ã£ã¦ä½•?](https://qiita.com/naka_kyon/items/7840b19d8f0cdd667699)

### å€‹åˆ¥

#### std::fmt

Rust ã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ©Ÿèƒ½ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã€Format ãƒˆãƒ¬ã‚¤ãƒˆç¾¤ã‚„ Formatter ãªã©ã€println! ã‚„ format! ã®ã‚ˆã†ãªæ–‡å­—åˆ—æ•´å½¢ã‚’æ”¯ãˆã‚‹ä»•çµ„ã¿ã‚’æä¾›ã™ã‚‹ã€‚

## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼Cargo

ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã¯åˆ¥ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§æ©Ÿèƒ½ã‚’æä¾›ã•ã‚Œã‚‹ã‚‚ã®ã‚’ä½¿ã†å ´åˆ

``` shell
$ cargo --version
```

å¤šåˆ†Dockerã®Fromã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ä¸€è‡´ã—ã¦ã‚‹ã‚‚ã®ã¨æ€ã‚ã‚Œã‚‹

### Cargoã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

``` shell
$ cargo new hello_cargo  #ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒä½œæˆã•ã‚Œã‚‹
$ cd hello_cargo
$ ls
```

``` text
hello_cargo
 |- src
     â”” main.rs
 |- .gitignore
 â”” - Cargo.toml         # package.jsonã¿ãŸã„ãªã‚„ã¤
```

* gitã«ã¤ã„ã¦

å‚è€ƒæ–‡çŒ®ã‚ˆã‚Š

``` text
ã¾ãŸã€.gitignoreãƒ•ã‚¡ã‚¤ãƒ«ã¨å…±ã«æ–°ã—ã„Gitãƒªãƒã‚¸ãƒˆãƒªã‚‚åˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚ ã‚‚ã—ã€ã™ã§ã«å­˜åœ¨ã™ã‚‹Gitãƒªãƒã‚¸ãƒˆãƒªã®ä¸­ã§cargo newã‚’å®Ÿè¡Œã—ãŸãªã‚‰ã€Gité–¢é€£ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä½œã‚‰ã‚Œã¾ã›ã‚“ã€‚ cargo new --vcs=gitã¨ã™ã‚‹ã“ã¨ã§ã€ã“ã®æŒ¯ã‚‹èˆã„ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚

è£œè¶³ï¼šGitã¯ä¸€èˆ¬çš„ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚ cargo newã‚³ãƒãƒ³ãƒ‰ã«--vcsãƒ•ãƒ©ã‚°ã‚’ä¸ãˆã‚‹ã“ã¨ã§ã€åˆ¥ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨ã—ãŸã‚Šã€ä½•ã‚‚ä½¿ç”¨ã—ãªã„ã‚ˆã†ã«ã‚‚ã§ãã¾ã™ã€‚ åˆ©ç”¨å¯èƒ½ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã™ã‚‹ã«ã¯cargo new --helpã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
```

#### Cargo.tomlã«ã¤ã„ã¦

TOMLï¼ˆTom's Obvious, Minimal Languageã€ãƒˆãƒ ã®æ˜ç¢ºãªæœ€å°é™ã®è¨€èªï¼‰å½¢å¼ã§ã€Cargoã®è¨­å®šãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã™ã€‚

ä½œæˆã•ã‚ŒãŸCargo.toml

``` text
[package]
name = "hello_cargo"
version = "0.1.0"
edition = "2021"

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
```

- [package]
ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼

- [dependencies]
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¨˜è¼‰ã™ã‚‹ã¨ã“ã‚ã€‚Rustã§ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã“ã¨ã‚’**ã‚¯ãƒ¬ãƒ¼ãƒˆ**ã¨å‘¼ã¶ã‚‰ã—ã„ã€‚
ä»¥ä¸‹ã®ã‚ˆã†ãªè¨˜è¿°ã‚’ã™ã‚‹ã“ã¨ã§ã‚¯ãƒ¬ãƒ¼ãƒˆã‚’è¿½åŠ ã™ã‚‹

``` toml
rand = "0.8.3"
```

æ”¹ã‚ã¦buildã™ã‚Œã°ã€å‹æ‰‹ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãŒè„†å¼±ã ã‹ã‚‰ãªã®ã‹çµæ§‹é•·ã„ã€‚ã€‚
æœ€åˆbuildã—ã¦ã—ã¾ãˆã°ã€Cargo.lockãƒ•ã‚¡ã‚¤ãƒ«ã§ä»Šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨˜æ†¶ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¯ã•ã‚Œãªã„ã€‚

editionã¯ç¾çŠ¶'2015','2018','2021'ã®ã©ã‚Œã‹

##### ã‚¯ãƒ¬ãƒ¼ãƒˆã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã¤ã„ã¦

ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒå¿…è¦ãªã‚‰ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¾ã§ã•ã‚Œã‚‹

``` shell
$ cargo update
    Updating crates.io index
    (crates.ioã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°ã—ã¦ã„ã¾ã™)
    Updating rand v0.8.3 -> v0.8.4
    (randã‚¯ãƒ¬ãƒ¼ãƒˆã‚’v0.8.3 -> v0.8.4ã«æ›´æ–°ã—ã¦ã„ã¾ã™)
```

ãŸã æœ«å°¾ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãã‚‰ã„ã¾ã§ã—ã‹è‡ªå‹•ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œãªã„ã¿ãŸã„ã€‚
ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‹ã‚‰å…ˆã¯Cargo.tomlã‚’æ›´æ–°ã—ã¦ãƒ“ãƒ«ãƒ‰ãŒå¿…è¦ã‚‰ã—ã„ã€‚

##### ã‚¯ãƒ¬ãƒ¼ãƒˆã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¯ãƒ¬ãƒ¼ãƒˆã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§è¡¨ç¤ºã—ã¦ãã‚Œã‚‹ã‚ˆã†ã ãŒã€ã§ããªã‹ã£ãŸ

``` shell
$ cargo doc --open
```

#### ãƒ“ãƒ«ãƒ‰

ä½œæˆã•ã‚ŒãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€å†…ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹

``` shell
$ cargo build
```

ã„ã‚ã„ã‚ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã‚‹ãŒã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã§ãã‚‹

``` shell
$ ./target/build/[bainaryName]
```

bainaryNameã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã¨åŒã˜ã£ã½ã„ã€‚

#### ä¸€æ‹¬å®Ÿè¡Œ

ãƒ“ãƒ«ãƒ‰ã‹ã‚‰å®Ÿè¡Œã¾ã§ã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§å¯èƒ½

``` shell
$ cargo run
```

#### ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¯å¦ã®ãƒã‚§ãƒƒã‚¯ã ã‘

``` shell
$ cargo check
```

ãƒ“ãƒ«ãƒ‰ã‚ˆã‚Šã‚‚é«˜é€Ÿ

## rustdoc
 
Rust ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ **`///`ï¼ˆã‚¢ã‚¤ãƒ†ãƒ ç”¨ï¼‰** ã¨ **`//!`ï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ã‚¯ãƒ¬ãƒ¼ãƒˆç”¨ï¼‰** ã® **docã‚³ãƒ¡ãƒ³ãƒˆ**ã‚’ Markdown ã§è¨˜è¿°ã—ã€`cargo doc` ã§ HTML ã«å‡ºåŠ›ã—ã¾ã™ã€‚**doctest** ã«ã‚ˆã‚Šã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸­ã®ã‚³ãƒ¼ãƒ‰ã¯è‡ªå‹•ãƒ†ã‚¹ãƒˆã•ã‚Œã¾ã™ã€‚

***

## 1. åŸºæœ¬ã®æ›¸ãæ–¹ï¼š`///` ã¨ `//!`

*   \*\*ã‚¢ã‚¤ãƒ†ãƒ ï¼ˆé–¢æ•°ãƒ»æ§‹é€ ä½“ãªã©ï¼‰\*\*ã«èª¬æ˜ã‚’æ›¸ãï¼š`///`
*   **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚„ã‚¯ãƒ¬ãƒ¼ãƒˆå…¨ä½“ã®èª¬æ˜**ï¼š`//!`ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«å…ˆé ­ã‚„ `mod.rs` / `lib.rs` ã®å…ˆé ­ã«ï¼‰

````rust
//! ã“ã®ã‚¯ãƒ¬ãƒ¼ãƒˆã¯ç°¡å˜ãªæ•°å€¤æ¼”ç®—ã‚’æä¾›ã—ã¾ã™ã€‚
//!
//! # æ©Ÿèƒ½
//! - åŠ ç®—
//! - ä¹—ç®—

/// 2ã¤ã®æ•°ã‚’åŠ ç®—ã—ã¾ã™ã€‚
///
/// # ä¾‹
/// ```
/// use my_crate::add;
/// assert_eq!(add(2, 3), 5);
/// ```
pub fn add(a: i32, b: i32) -> i32 {
    a + b
}
````

***

## 2. æ¨å¥¨ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ§‹æˆï¼ˆå…¬å…±APIã«ç‰¹ã«æœ‰åŠ¹ï¼‰

Rust ã®æ…£ä¾‹ã¨ã—ã¦ã€ä»¥ä¸‹ã®è¦‹å‡ºã—ã‚’ä½¿ã†ã¨åˆ©ç”¨è€…ãŒæƒ…å ±ã‚’æ¢ã—ã‚„ã™ããªã‚Šã¾ã™ï¼š

*   `# Examples`ï¼š**å®Ÿè¡Œå¯èƒ½ãªä½¿ç”¨ä¾‹**ï¼ˆdoctestãŒèµ°ã‚‹ï¼‰
*   `# Panics`ï¼š**ã©ã®æ¡ä»¶ã§ panic ã™ã‚‹ã‹**
*   `# Errors`ï¼š**`Result` ã®ã‚¨ãƒ©ãƒ¼æ¡ä»¶ã¨å‹**
*   `# Safety`ï¼š**`unsafe` ã‚’å«ã‚€å ´åˆã®å®‰å…¨æ€§ã®å‰æ**
*   `# Performance` / `# Notes` / `# Limitations`ï¼šè¨­è¨ˆä¸Šã®æ³¨æ„ç‚¹

````rust
/// ãƒ™ã‚¯ãƒˆãƒ«å†…ã®æœ€å¤§å€¤ã‚’è¿”ã—ã¾ã™ã€‚
///
/// # Examples
/// ```
/// use my_crate::max_in_vec;
/// assert_eq!(max_in_vec(&[1, 4, 2]), Some(4));
/// ```
///
/// # Panics
/// ç©ºã®ã‚¹ãƒ©ã‚¤ã‚¹ã‚’æ¸¡ã™ã¨ **panic ã¯ã—ã¾ã›ã‚“**ï¼ˆ`None` ã‚’è¿”ã—ã¾ã™ï¼‰ã€‚
///
/// # Errors
/// ãªã—ï¼ˆ`Option` ã§è¡¨ç¾ï¼‰
///
/// # Performance
/// O(n) æ™‚é–“ã€‚å…¥åŠ›ã‚µã‚¤ã‚ºã«æ¯”ä¾‹ã—ã¾ã™ã€‚
pub fn max_in_vec(xs: &[i32]) -> Option<i32> {
    xs.iter().cloned().max()
}
````

***

## 3. Doctestï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå†…ã‚³ãƒ¼ãƒ‰ã®ãƒ†ã‚¹ãƒˆï¼‰

### è¡¨ç¤ºã‚’éš ã—ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã ã‘ã—ãŸã„è¡Œã¯ `#` ã§å§‹ã‚ã‚‹

````rust
/// # Examples
/// ```
/// # use my_crate::add;
/// let x = add(1, 2);
/// assert_eq!(x, 3);
/// ```
````

### å®Ÿè¡Œã•ã›ãªã„ï¼å¤±æ•—ã‚’æœŸå¾…ã™ã‚‹

*   `no_run`ï¼šã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã¯ã™ã‚‹ãŒå®Ÿè¡Œã—ãªã„ï¼ˆå‰¯ä½œç”¨ãŒã‚ã‚‹ä¾‹ãªã©ï¼‰
*   `should_panic`ï¼šãƒ‘ãƒ‹ãƒƒã‚¯ã‚’æœŸå¾…
*   `compile_fail`ï¼š**ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒå¤±æ•—ã™ã‚‹**ä¾‹ã‚’ç¤ºã—ãŸã„ã¨ã

````rust
/// # Examples
/// ```no_run
/// // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãŒå¿…è¦ãªä¾‹ãªã©
/// let _ = std::net::TcpStream::connect("example.com:80").unwrap();
/// ```
///
/// ```should_panic
/// // ã“ã®é–¢æ•°ã¯è² æ•°ã§ panic ã—ã¾ã™
/// my_crate::must_be_positive(-1);
/// ```
///
/// ```compile_fail
/// // å‹ãŒåˆã‚ãªã„ä¾‹ï¼ˆã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã“ã¨ã‚’ç¤ºã™ï¼‰
/// my_crate::add("a", "b");
/// ```
````

> Doctest ã®å®Ÿè¡Œï¼š`cargo test --doc`ï¼ˆé€šå¸¸ã® `cargo test` ã§ã‚‚ä½µèµ°ã—ã¾ã™ï¼‰

***

## 4. Intra-doc Linksï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå†…ãƒªãƒ³ã‚¯ï¼‰

ã‚³ãƒ¼ãƒ‰è¦ç´ ã¸ **å®‰å…¨ã«ãƒªãƒ³ã‚¯** ã™ã‚‹ãŸã‚ã®è¨˜æ³•ã€‚**ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã«å¼·ã„**ã®ã§æ¨å¥¨ã§ã™ã€‚

```rust
/// ã“ã®é–¢æ•°ã¯ crate::utils::parse ã‚’å†…éƒ¨ã§ä½¿ç”¨ã—ã¾ã™ã€‚
///
/// `Result` å‹ã«ã¤ã„ã¦ã¯ [`std::result::Result`] ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
pub fn process(input: &str) -> Result<(), crate::Error> { /* ... */ }
```

*   `path::to::Type` ã®å½¢å¼ã§ãƒªãƒ³ã‚¯ã‚’æ›¸ãã¨ã€rustdoc ãŒè§£æ±ºã—ã¾ã™ã€‚
*   å¤–éƒ¨ã‚¯ãƒ¬ãƒ¼ãƒˆã‚„æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¸ã‚‚ãƒªãƒ³ã‚¯å¯èƒ½ï¼ˆä¾‹ï¼š`std::result::Result`ï¼‰ã€‚
*   Markdown ã®è£¸URLã‚ˆã‚Š **intra-doc link ã‚’æ¨å¥¨**ã€‚

***

## 5. å±æ€§ã«ã‚ˆã‚‹åˆ¶å¾¡ï¼š`#[doc(...)]` ç³»

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆæ™‚ã®ç´°ã‹ãªåˆ¶å¾¡ã«ä¾¿åˆ©ã§ã™ã€‚

```rust
/// é€šå¸¸ã®èª¬æ˜ã§ã™ã€‚
#[doc(alias = "sum")] // åˆ¥åã§æ¤œç´¢ã—ã‚„ã™ãã™ã‚‹ï¼ˆä¾‹ï¼šsum ã§ãƒ’ãƒƒãƒˆï¼‰
#[doc(cfg(feature = "fast"))] // ã“ã®æ©Ÿèƒ½ãŒ "fast" ãƒ•ã‚£ãƒ¼ãƒãƒ£ã§æœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã‚’è¡¨ç¤º
pub fn add(a: i32, b: i32) -> i32 { a + b }

/// å®Ÿè£…è©³ç´°ã®ãŸã‚ API ãƒªã‚¹ãƒˆã‹ã‚‰éš ã—ã¾ã™ã€‚
#[doc(hidden)]
pub fn internal_helper() {}
```

*   `#[doc = include_str!("README.md")]`ï¼š**å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–ã‚Šè¾¼ã‚€**ï¼ˆã‚¯ãƒ¬ãƒ¼ãƒˆãƒ«ãƒ¼ãƒˆã®å¤§ããªèª¬æ˜ã«ä¾¿åˆ©ï¼‰
    ```rust
    //! # ã“ã®ã‚¯ãƒ¬ãƒ¼ãƒˆã«ã¤ã„ã¦
    #![doc = include_str!("../README.md")]
    ```

***

## 6. ã‚¯ãƒ¬ãƒ¼ãƒˆï¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«æ–‡æ›¸

*   **ã‚¯ãƒ¬ãƒ¼ãƒˆèª¬æ˜**ã¯ `lib.rs` ã®å…ˆé ­ã§ `//!` ã‚’ä½¿ã†
*   **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«èª¬æ˜**ã¯ `mod.rs` ã¾ãŸã¯ `module.rs` ã®å…ˆé ­ã§ `//!`

```rust
// src/lib.rs
//! # my_crate
//! é«˜é€Ÿãªæ•°å€¤æ¼”ç®—ã‚¯ãƒ¬ãƒ¼ãƒˆã§ã™ã€‚
//!
//! - `add`ï¼šåŠ ç®—
//! - `mul`ï¼šä¹—ç®—

pub mod math;
```

```rust
// src/math.rs
//! æ•°å­¦é–¢é€£ã®é–¢æ•°ç¾¤ã€‚

/// ä¹—ç®—ã—ã¾ã™ã€‚
pub fn mul(a: i32, b: i32) -> i32 { a * b }
```

***

## 7. Markdown ã®ã‚³ãƒ„ï¼ˆè¦‹æ „ãˆã¨ä¿å®ˆæ€§ï¼‰

*   **è¦‹å‡ºã—**ï¼š`#`, `##`, `###` ã‚’é©åº¦ã«ä½¿ã†
*   **ã‚³ãƒ¼ãƒ‰ãƒ•ã‚§ãƒ³ã‚¹**ï¼šRust ã®ä¾‹ã¯ ` ` ã§å›²ã‚€ã€‚ã‚¿ã‚°ï¼ˆ`no_run`, `should_panic`, `compile_fail`ï¼‰ã‚’æ´»ç”¨
*   **ç®‡æ¡æ›¸ã**ï¼š`-` ã‹ `*`
*   **ãƒ†ãƒ¼ãƒ–ãƒ«**ï¼šå¿…è¦ãªã‚‰ Markdown ãƒ†ãƒ¼ãƒ–ãƒ«ã‚‚å¯ï¼ˆãŸã ã—è¤‡é›‘ã«ã—ã™ããªã„ï¼‰
*   **æ³¨è¨˜**ï¼šå¼•ç”¨ `>` ã‚’ä½¿ã†ã“ã¨ã§ç›®ç«‹ãŸã›ã‚‰ã‚Œã‚‹
*   **ç”»åƒ**ï¼šãƒ‘ã‚¹æŒ‡å®šã§åŸ‹ã‚è¾¼ã¿å¯èƒ½ï¼ˆå…¬é–‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ç›¸å¯¾ãƒ‘ã‚¹ã‚’æ‰±ã†éš›ã¯ãƒ“ãƒ«ãƒ‰ç’°å¢ƒã«æ³¨æ„ï¼‰

***

## 8. ç”Ÿæˆã‚³ãƒãƒ³ãƒ‰ï¼†ã‚ªãƒ—ã‚·ãƒ§ãƒ³

*   **æ¨™æº–**ï¼š`cargo doc --open`ï¼ˆç”Ÿæˆå¾Œãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãï¼‰
*   **ä¾å­˜ã‚’é™¤ã**ï¼š`cargo doc --no-deps`
*   **ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚‚å‡ºã™**ï¼š`cargo doc --document-private-items`ï¼ˆç¤¾å†…ç”¨ã«ä¾¿åˆ©ï¼‰
*   **ãƒ•ã‚£ãƒ¼ãƒãƒ£æŒ‡å®š**ï¼š`cargo doc --features fast` / `--all-features`
*   **ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹**ï¼šãƒ«ãƒ¼ãƒˆã§ `cargo doc --workspace`

***

## 9. å®Ÿç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆé–¢æ•°ãƒ»æ§‹é€ ä½“ï¼‰

### é–¢æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

````rust
/// {{é–¢æ•°ã®ä¸€æ–‡è¦ç´„}}ã€‚
///
/// {{è©³ã—ã„èª¬æ˜ã€‚å‰ææ¡ä»¶ã‚„å‰¯ä½œç”¨ãŒã‚ã‚Œã°æ˜è¨˜ã€‚}}
///
/// # Examples
/// ```
/// // å®Ÿè¡Œå¯èƒ½ãªæœ€å°ä¾‹
/// # use my_crate::{{fn_name}};
/// let out = {{fn_name}}({{args}});
/// # assert!(true);
/// ```
///
/// # Panics
/// {{panicæ¡ä»¶}}ã€‚
///
/// # Errors
/// {{ã‚¨ãƒ©ãƒ¼å‹ã¨ç™ºç”Ÿæ¡ä»¶}}ã€‚
///
/// # Safety
/// {{unsafeå‰æ}}ï¼ˆunsafe ã‚’å«ã‚€å ´åˆã®ã¿ï¼‰ã€‚
pub fn {{fn_name}}(/* ... */) -> /* ... */ { /* ... */ }
````

### æ§‹é€ ä½“ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

````rust
/// {{å‹ã®ä¸€æ–‡è¦ç´„}}ã€‚
///
/// {{ç”¨é€”ã‚„è¨­è¨ˆæ–¹é‡ã€æ³¨æ„ç‚¹}}ã€‚
///
/// # Examples
/// ```
/// # use my_crate::{{Type}};
/// let t = {{Type}}::new(/* ... */);
/// # assert!(true);
/// ```
pub struct {{Type}} {
    /// {{ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ„å‘³ã¨å˜ä½ãƒ»åˆ¶ç´„ãªã©}}
    pub value: i32,
}
````

***

## 10. ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

*   **ä¾‹ã¯æœ€å°ã§å®Ÿç”¨çš„**ã«ï¼šé•·ã™ãã‚‹ä¾‹ã¯åˆ†å‰²
*   **`Panics`/`Errors` ã¯æ­£ç¢ºã«**ï¼šåˆ©ç”¨è€…ã®ãƒã‚°ã‚’æ¸›ã‚‰ã™
*   **`Safety` ã¯å¿…é ˆ**ï¼š`unsafe` ã‚’å«ã‚€ API ã§ã¯æ˜ç¢ºã«
*   **intra-doc links ã‚’ç©æ¥µçš„ã«**ï¼šãƒªãƒ•ã‚¡ã‚¯ã‚¿ã«å¼·ã„
*   **`#[doc(alias = "...")]`**ï¼šæ¤œç´¢æ€§ã‚¢ãƒƒãƒ—ï¼ˆåˆ¥åã‚„ä¿—ç§°ï¼‰
*   **`include_str!` ã§å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†åˆ©ç”¨**ï¼šREADME ã¨åŒæœŸ
*   **doctest ã‚’ CI ã§å›ã™**ï¼šä¾‹ã®é®®åº¦ã‚’ä¿ã¤

***

## 11. ã‚ã‚ŠãŒã¡ãªè½ã¨ã—ç©´ã¨å¯¾ç­–

*   **ãƒ‘ã‚¹è§£æ±ºãŒå¤±æ•—ã™ã‚‹ãƒªãƒ³ã‚¯**  
    â†’ `crate::` ã‹ã‚‰ã®çµ¶å¯¾ãƒ‘ã‚¹ã§æ›¸ãï¼å®Ÿåœ¨ã™ã‚‹ã‚¢ã‚¤ãƒ†ãƒ åã‚’ç¢ºèª

*   **`compile_fail` ã‚’èª¤ç”¨**  
    â†’ æœ¬å½“ã«ã€Œã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¤±æ•—ã™ã‚‹ã€ã‚³ãƒ¼ãƒ‰ã ã‘ã«ä½¿ã†ï¼ˆå®Ÿè¡Œå¤±æ•—ã¯ `should_panic`ï¼‰

*   **é•·ã„ä¾‹ãŒå£Šã‚Œã‚„ã™ã„**  
    â†’ è£œåŠ©è¡Œã¯ `#` ã§éš ã™ã€å¤–éƒ¨ä¾å­˜ã¯ `no_run` ã§æŠ‘åˆ¶

*   **ãƒ•ã‚£ãƒ¼ãƒãƒ£ã”ã¨ã® API**  
    â†’ `#[doc(cfg(feature = "..."))]` ã§å¯è¦–æ€§ã‚’è¡¨ç¤ºã€`cargo doc --features ...` ã§æ¤œè¨¼

***

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆã”å¸Œæœ›ãŒã‚ã‚Œã°ï¼‰

*   å®Ÿéš›ã® **é–¢æ•°ï¼å‹** ã«åˆã‚ã›ã¦ **æ—¥æœ¬èªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é©ç”¨**ã—ãŸã‚µãƒ³ãƒ—ãƒ«ã‚’æ›¸ãã¾ã™ã€‚
*   æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ **`cargo doc` ã®å‡ºåŠ›ãŒèª­ã¿ã‚„ã™ããªã‚‹ã‚ˆã†** docã‚³ãƒ¡ãƒ³ãƒˆã‚’æ•´ãˆã‚‹ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚’ä½œã‚Šã¾ã™ã€‚
*   CIï¼ˆGitHub Actions ãªã©ï¼‰ã§ **doctest ã‚’å¸¸æ™‚å®Ÿè¡Œ**ã™ã‚‹è¨­å®šä¾‹ã‚‚ç”¨æ„ã§ãã¾ã™ã€‚

## èª­ã¿ã‚„ã™ãã™ã‚‹ã«ã¯

**æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã® docã‚³ãƒ¡ãƒ³ãƒˆã‚’æ•´ãˆã¦ `cargo doc` ã®å‡ºåŠ›ã‚’èª­ã¿ã‚„ã™ãã™ã‚‹ãŸã‚ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**ã‚’ã€ã™ãã«ä½¿ãˆã‚‹å½¢ã§ã¾ã¨ã‚ã¾ã—ãŸã€‚Rust ã®æ…£ä¾‹ã«æ²¿ã„ã¤ã¤ã€ç¾å ´ã§ãƒ¡ãƒ³ãƒ†å¯èƒ½ãªé‹ç”¨é¢ï¼ˆCIã‚„ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹ï¼‰ã‚‚å«ã‚ã¦ã„ã¾ã™ã€‚

***

## ğŸ“‹ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼ˆå®Ÿå‹™å‘ã‘ï¼‰

### 1) é…ç½®ã¨ç²’åº¦

*   [ ] **`//!` ã‚’ã‚¯ãƒ¬ãƒ¼ãƒˆï¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å…ˆé ­ã«**ç½®ã„ã¦ã€å…¨ä½“æ¦‚è¦ãƒ»è¨­è¨ˆæ–¹é‡ãƒ»ç”¨èªå®šç¾©ã‚’è¨˜è¼‰
    *   ã‚¯ãƒ¬ãƒ¼ãƒˆï¼š`src/lib.rs` ã®å…ˆé ­
    *   ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼š`src/<module>.rs` ã®å…ˆé ­
*   [ ] **`///` ã¯å…¬é–‹ APIï¼ˆpubï¼‰ã‚’ä¸­å¿ƒã«**ï¼šé–¢æ•°ï¼å‹ï¼traitï¼ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼å®šæ•°ã«ä»˜ã‘ã‚‹
*   [ ] **éå…¬é–‹ API ã¯å¿…è¦ã«å¿œã˜ã¦**ï¼šç¤¾å†…ç”¨ãªã‚‰ `--document-private-items` ã‚’å‰æã«æ•´ãˆã‚‹

### 2) ä¸€æ–‡è¦ç´„ã¨ç›®çš„

*   [ ] **å…ˆé ­è¡Œã¯ä¸€æ–‡è¦ç´„**ï¼ˆåè©ã§çµ‚ã‚ã‚‹çŸ­æ–‡ã€æ¤œç´¢ä¸€è¦§ã§è¦‹ãˆã‚‹æƒ³å®šï¼‰
*   [ ] **æ¬¡ã«è©³ç´°èª¬æ˜**ï¼ˆå‰ææ¡ä»¶ã€åˆ¶ç´„ã€å…¸å‹çš„ãªç”¨é€”ï¼éç”¨é€”ã‚’ç°¡æ½”ã«ï¼‰

### 3) ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ§‹æˆï¼ˆæ¨å¥¨ï¼‰

*   [ ] `# Examples`ï¼šæœ€å°ã§å®Ÿç”¨çš„ãªã‚µãƒ³ãƒ—ãƒ«ï¼ˆå¾Œè¿°ã® Doctest ãƒ«ãƒ¼ãƒ«ã«å¾“ã†ï¼‰
*   [ ] `# Panics`ï¼šãƒ‘ãƒ‹ãƒƒã‚¯æ¡ä»¶ãŒã‚ã‚Œã°æ˜è¨˜ï¼ˆç„¡ã„ãªã‚‰çœç•¥å¯ï¼‰
*   [ ] `# Errors`ï¼š`Result` ã®ã‚¨ãƒ©ãƒ¼å‹ã¨ç™ºç”Ÿæ¡ä»¶ã‚’æ˜è¨˜
*   [ ] `# Safety`ï¼š`unsafe` ãŒçµ¡ã‚€ API ã¯ **å¿…é ˆ**ï¼ˆåˆ©ç”¨è€…ã®è²¬å‹™ã‚’å…·ä½“çš„ã«ï¼‰
*   [ ] `# Performance` / `# Notes` / `# Limitations`ï¼šé‡è¦ãªæ€§èƒ½ç‰¹æ€§ã‚„åˆ¶é™ãŒã‚ã‚Œã°

### 4) Doctestï¼ˆå‹•ãä¾‹ï¼‰

*   [ ] \*\*ã‚µãƒ³ãƒ—ãƒ«ã¯åŸºæœ¬ã€Œå®Ÿè¡Œå¯èƒ½ã€\*\*ã«ã—ã€è£œåŠ©è¡Œã¯ `#` ã§éš ã™
*   [ ] å‰¯ä½œç”¨ï¼å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ãŒã‚ã‚‹ä¾‹ã¯ `no_run`
*   [ ] å¤±æ•—ã‚’ç¤ºã™ä¾‹ã¯ `should_panic`
*   [ ] ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒé€šã‚‰ãªã„ã“ã¨ã‚’ç¤ºã™ä¾‹ã¯ `compile_fail`
*   [ ] **CI ã§ `cargo test --doc` ã‚’å¸¸æ™‚å®Ÿè¡Œ**ï¼ˆå£Šã‚ŒãŸã‚µãƒ³ãƒ—ãƒ«ã‚’æ—©æœŸæ¤œå‡ºï¼‰

### 5) ãƒªãƒ³ã‚¯ã®è³ªï¼ˆIntra-doc Linksï¼‰

*   [ ] **ã‚³ãƒ¼ãƒ‰è¦ç´ ã¸ã®ãƒªãƒ³ã‚¯ã¯** Markdown ã§ `[`å‹/é–¢æ•°å`]` + ãƒ‘ã‚¹ï¼ˆä¾‹ï¼š`[`std::result::Result`]`ã€`[`crate::parser::parse`]`ï¼‰
*   [ ] ç›¸å¯¾ãƒ‘ã‚¹ã‚ˆã‚Š **`crate::` ã‹ã‚‰çµ¶å¯¾ãƒ‘ã‚¹**ã‚’æ¨å¥¨ï¼ˆãƒªãƒ•ã‚¡ã‚¯ã‚¿ã«å¼·ã„ï¼‰
*   [ ] å¤–éƒ¨ã‚¯ãƒ¬ãƒ¼ãƒˆã‚„æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚‚ç©æ¥µçš„ã«ãƒªãƒ³ã‚¯

### 6) æ¤œç´¢æ€§ãƒ»å¯è¦–æ€§

*   [ ] **ã‚·ãƒãƒ‹ãƒ ã‚’ `#[doc(alias = "...")]`** ã§è¿½åŠ ï¼ˆä¾‹ï¼šã€Œsumã€ã€Œtotalã€ãªã©ï¼‰
*   [ ] feature-gated API ã«ã¯ **`#[doc(cfg(feature = "..."))]`** ã‚’ä»˜ä¸
*   [ ] å†…éƒ¨å°‚ç”¨ API ã¯ **`#[doc(hidden)]`** ã§ä¸€è¦§ã‹ã‚‰é™¤å¤–ï¼ˆãƒªãƒ³ã‚¯å…ˆã‹ã‚‰ã¯è¦‹ãˆã‚‹ï¼‰

### 7) è¡¨ç¾ã®ä¸€è²«æ€§ï¼ˆç”¨èªãƒ»å˜ä½ï¼‰

*   [ ] **ãƒ‰ãƒ¡ã‚¤ãƒ³ç”¨èªé›†**ã‚’ã‚¯ãƒ¬ãƒ¼ãƒˆå…ˆé ­ã«ç”¨æ„ï¼ˆ`//!` ã§ Glossaryï¼ç´„ç‰©ã®çµ±ä¸€ï¼‰
*   [ ] **å˜ä½ãƒ»ç¯„å›²ãƒ»å‰æã‚’ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«æ˜è¨˜**ï¼ˆä¾‹ï¼šã€ŒãƒŸãƒªç§’ã€ã€Œ0..=255ã€ãªã©ï¼‰
*   [ ] ã‚¨ãƒ©ãƒ¼æ–‡è¨€ãƒ»panic æ¡ä»¶ã¯ **ã‚³ãƒ¼ãƒ‰ã¨æ•´åˆ**ï¼ˆæ›–æ˜§èªã‚’é¿ã‘ã‚‹ï¼‰

### 8) Markdown ã®ä½œæ³•

*   [ ] è¦‹å‡ºã—ã¯ `#` â†’ `##` â†’ `###` ã®æ·±ã•ã‚’æ•´ç†ã—ã€1ãƒ•ã‚¡ã‚¤ãƒ«ã§ **2â€“3éšå±¤ã«ç•™ã‚ã‚‹**
*   [ ] ç®‡æ¡æ›¸ãã¯çŸ­ããƒ»å¹³æ˜“ã«ï¼ˆå†—é•·èª¬æ˜ã¯åˆ¥ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¸ï¼‰
*   [ ] ã‚³ãƒ¼ãƒ‰ãƒ•ã‚§ãƒ³ã‚¹ã¯ \`\`\`rust ã§çµ±ä¸€ã€ã‚¿ã‚°ï¼ˆ`no_run` ç­‰ï¼‰ã‚’é©åˆ‡ã«
*   [ ] è¡¨ã‚„ç”»åƒã¯ **å¿…è¦æœ€å°é™**ï¼ˆç”»åƒã¯ãƒ“ãƒ«ãƒ‰ç’°å¢ƒã§è§£æ±ºå¯èƒ½ãªãƒ‘ã‚¹ã«ï¼‰

### 9) å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã®å–ã‚Šè¾¼ã¿ï¼ˆé‡è¤‡æ’é™¤ï¼‰

*   [ ] **README ã‚’ã‚¯ãƒ¬ãƒ¼ãƒˆèª¬æ˜ã«å†åˆ©ç”¨**ï¼š`#![doc = include_str!("../README.md")]`
*   [ ] é•·ã„ä»•æ§˜ã¯ `include_str!` ã§å–ã‚Šè¾¼ã‚“ã§ **ä¸€å…ƒç®¡ç†**
*   [ ] å¤‰æ›´æ™‚ã®å·®åˆ†æŠŠæ¡ã®ãŸã‚ã€**ãƒ•ã‚¡ã‚¤ãƒ«å†’é ­ã«ç‰ˆç•ªå·ï¼æ›´æ–°æ—¥**ã‚’æ˜è¨˜

### 10) ã‚³ãƒãƒ³ãƒ‰é‹ç”¨

*   [ ] é€šå¸¸ï¼š`cargo doc --open`
*   [ ] ä¾å­˜é™¤å¤–ï¼š`cargo doc --no-deps`
*   [ ] ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆå«ã‚€ï¼š`cargo doc --document-private-items`
*   [ ] feature æŒ‡å®šï¼š`cargo doc --features fast` / `--all-features`
*   [ ] ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ï¼š`cargo doc --workspace`

***

## âœ… ã™ãã«ä½¿ãˆã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ï¼ˆè²¼ã‚Šä»˜ã‘ç”¨ï¼‰

### é–¢æ•°

````rust
/// {{ä¸€æ–‡è¦ç´„}}ã€‚
///
/// {{è©³ç´°èª¬æ˜ï¼šç›®çš„ï¼å‰æï¼å‰¯ä½œç”¨ï¼æ³¨æ„ç‚¹}}ã€‚
///
/// # Examples
/// ```
/// # use my_crate::{{fn_name}};
/// let out = {{fn_name}}({{args}});
// # assert!(true);
/// ```
///
/// # Panics
/// {{panicæ¡ä»¶}}ã€‚
///
/// # Errors
/// {{ã‚¨ãƒ©ãƒ¼å‹}} â€” {{ç™ºç”Ÿæ¡ä»¶}}ã€‚
///
/// # Safety
/// {{unsafeå‰æã¨å‘¼ã³å‡ºã—å´ã®è²¬å‹™}}ï¼ˆunsafe é–¢æ•°ï¼ãƒã‚¤ãƒ³ã‚¿æ“ä½œç­‰ã®å ´åˆï¼‰ã€‚
pub fn {{fn_name}}(/* ... */) -> /* ... */ { /* ... */ }
````

### æ§‹é€ ä½“ï¼ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

````rust
/// {{å‹ã®ä¸€æ–‡è¦ç´„}}ã€‚
///
/// {{ç”¨é€”ãƒ»è¨­è¨ˆæ–¹é‡ãƒ»åˆ¶ç´„}}ã€‚
///
/// # Examples
/// ```
/// # use my_crate::{{Type}};
/// let t = {{Type}}::new(/* ... */);
/// ```
pub struct {{Type}} {
    /// {{æ„å‘³ï¼å˜ä½ï¼è¨±å®¹ç¯„å›²ï¼ˆä¾‹ï¼šãƒŸãƒªç§’ã€0..=255ï¼‰}}
    pub value: i32,
}
````

### ã‚¯ãƒ¬ãƒ¼ãƒˆå…ˆé ­ï¼ˆ`lib.rs`ï¼‰

```rust
//! # {{ã‚¯ãƒ¬ãƒ¼ãƒˆå}}
//! {{ã‚¯ãƒ¬ãƒ¼ãƒˆã®æ¦‚è¦ã¨ç›®çš„}}ã€‚
//!
//! ## æ©Ÿèƒ½
//! - {{ä¸»è¦æ©Ÿèƒ½1}}
//! - {{ä¸»è¦æ©Ÿèƒ½2}}
//!
//! ## ç”¨èªï¼ˆGlossaryï¼‰
//! - {{ç”¨èª}}ï¼š{{å®šç¾©}}
//! - {{ç”¨èª}}ï¼š{{å®šç¾©}}
#![doc = include_str!("../README.md")]
```

***

## ğŸ§ª Doctest ãƒ«ãƒ¼ãƒ«ã®å…·ä½“åŒ–

*   **è£œåŠ©è¡Œã¯è¦‹ã›ãªã„**ï¼š
    ````rust
    /// # Examples
    /// ```
    /// # use my_crate::add;
    /// let x = add(1, 2);
    /// assert_eq!(x, 3);
    /// ```
    ````
*   **å‰¯ä½œç”¨ãŒã‚ã‚‹ä¾‹**ï¼š
    ````rust
    /// ```no_run
    /// let _ = std::net::TcpStream::connect("example.com:80").unwrap();
    /// ```
    ````
*   **ã‚¨ãƒ©ãƒ¼ä¾‹ãƒ»å¤±æ•—ä¾‹**ï¼š
    ````rust
    /// ```compile_fail
    /// my_crate::add("a", "b"); // å‹ãŒåˆã‚ãšã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
    /// ```
    ///
    /// ```should_panic
    /// my_crate::must_be_positive(-1); // è² æ•°ã§ panic
    /// ```
    ````

***

## ğŸ” ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹ï¼ˆPR ã® Diff ã‚’è¦‹ã‚‹ã¨ãï¼‰

*   [ ] ä¸€æ–‡è¦ç´„ãŒ **å…·ä½“çš„ãƒ»ç°¡æ½”**ã‹ï¼ˆæŠ½è±¡èªã®é€£æ‰“ã«ãªã£ã¦ã„ãªã„ã‹ï¼‰
*   [ ] `Examples` ãŒ **æœ€çŸ­ã§å‹•ã**ã‹ï¼ˆä¸è¦ãªä¾å­˜ã‚„ç„¡é§„ãªèª¬æ˜ãŒãªã„ã‹ï¼‰
*   [ ] `Panics` / `Errors` / `Safety` ãŒ **å®Ÿã‚³ãƒ¼ãƒ‰ã¨æ•´åˆ**ã—ã¦ã„ã‚‹ã‹
*   [ ] **intra-doc links** ã«çµ±ä¸€ã•ã‚Œã¦ã„ã‚‹ã‹ï¼ˆãƒ‘ã‚¹ãŒæ­£ã—ãè§£æ±ºã§ãã‚‹ã‹ï¼‰
*   [ ] **feature è¡¨ç¤º**ï¼ˆ`#[doc(cfg(...))]`ï¼‰ãŒæ¼ã‚Œã¦ã„ãªã„ã‹
*   [ ] ç”¨èªãƒ»å˜ä½ãƒ»ç¯„å›²ãŒ **æ˜ç¤º**ã•ã‚Œã¦ã„ã‚‹ã‹ï¼ˆæ›–æ˜§ã•ã‚’æ¸›ã‚‰ã™ï¼‰
*   [ ] å¤‰æ›´ã§ **doctest ãŒè½ã¡ã¦ã„ãªã„ã‹**ï¼ˆCIã§ç¢ºèªï¼‰

***

## ğŸ§‘â€ğŸ’» CI å°å…¥ä¾‹ï¼ˆGitHub Actionsï¼‰

`.github/workflows/doc.yml`

```yaml
name: Doc & Doctest

on:
  pull_request:
  push:
    branches: [ main ]

jobs:
  doctest:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: dtolnay/rust-toolchain@stable
      - name: Run doctests
        run: cargo test --doc --all-features

  build-doc:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: dtolnay/rust-toolchain@stable
      - name: Build documentation
        run: cargo doc --workspace --no-deps --all-features
```

***

## ğŸ”§ è‡ªå‹•ãƒã‚§ãƒƒã‚¯ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

*   **lint**ï¼š`cargo clippy` ã¯ã‚³ãƒ¼ãƒ‰å‘ã‘ã§ã™ãŒã€**doc å†…ã®ãƒªãƒ³ã‚¯åˆ‡ã‚Œæ¤œçŸ¥**ã¯ `rustdoc` ã®ãƒ“ãƒ«ãƒ‰æ™‚è­¦å‘Šã§æ‹¾ãˆã¾ã™ã€‚
*   **pre-commit**ï¼š`cargo test --doc` ã‚’ pre-commit ã§å›ã™ã¨ã€å£Šã‚ŒãŸä¾‹ã‚’ã‚³ãƒŸãƒƒãƒˆå‰ã«é˜²æ­¢ã§ãã¾ã™ã€‚

***

## ğŸ¯ æœ€å¾Œã«ï¼ˆè‹±ã•ã‚“å‘ã‘ææ¡ˆï¼‰

è‹±ã•ã‚“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ä»¥ä¸‹ã‹ã‚‰å§‹ã‚ã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ï¼š

1.  é‡è¦ãªå…¬é–‹ API ã« **ä¸€æ–‡è¦ç´„ï¼‹`Examples`ï¼‹`Errors`** ã‚’ã¾ãšä»˜ä¸
2.  `lib.rs` å…ˆé ­ã« **Glossary** ã¨ **README å–ã‚Šè¾¼ã¿**
3.  CI ã« **doctest** ã‚’å°å…¥ã—ã¦ã€ä»¥å¾Œã¯å£Šã‚Œãªã„é‹ç”¨ã«

ã‚‚ã—æ—¢å­˜ãƒ¬ãƒã‚¸ãƒˆãƒªï¼ˆé–¢æ•°åãƒ»å‹åãƒ»ã‚¨ãƒ©ãƒ¼å‹ï¼‰ã‚’å…±æœ‰ã„ãŸã ã‘ã‚Œã°ã€**ãƒ†ãƒ³ãƒ—ãƒ¬ã‚’å…·ä½“ã® API ã«åˆã‚ã›ã¦åŸ‹ã‚è¾¼ã‚“ã å·®åˆ†æ¡ˆ**ï¼ˆä¾‹ï¼šé–¢æ•°10æœ¬åˆ†ï¼‰ã‚’ä½œæˆã—ã¾ã™ã€‚å¿…è¦ãªã‚‰ **ç¤¾å†…å‘ã‘ï¼ˆ`--document-private-items` æƒ³å®šï¼‰ç‰ˆã®æ›¸ãã¶ã‚Š**ã«ã‚‚æœ€é©åŒ–ã—ã¾ã™ã€‚


## å‚è€ƒ

- [Dockerâœ•Dev Containerã§Rustã®é–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹](https://higmasan.com/docker/docker%E2%9C%95dev-container%E3%81%A7rust%E3%81%AE%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E3%82%92%E6%A7%8B%E7%AF%89%E3%81%99%E3%82%8B/)
- [The Rust Programming Language æ—¥æœ¬èªç‰ˆ](https://doc.rust-jp.rs/book-ja/title-page.html)