# åŸºç¤éƒ¨åˆ†

## å¤‰æ•°å®£è¨€

* å‘½åè¦å‰‡ï¼šã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹(ä¾‹ï¼šsome_variable)

* å¯å¤‰(mutable)

``` rust
let mut hoge = "42"
```

* ä¸å¤‰(immutable)

``` rust
let hoge = "42"
```

* å‹å®šç¾©(å‹æ³¨é‡ˆ)

``` rust
let hoge: i32 = 42
```

## å®šæ•°

``` rust
const MAX_POINTS: u32 = 100_000;
```

* Rustã®å®šæ•°ã®å‘½åè¦å‰‡ã¯ã€ å…¨ã¦å¤§æ–‡å­—ã§ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã§å˜èªåŒºåˆ‡ã‚Šã™ã‚‹ã“ã¨ã§ã™
* å€¤ã®å‹(ä¸Šè¨˜ã ã¨u32)ã¯å¿…ãšå¿…è¦
* å®šæ•°ã¯å®šæ•°å¼ã«ã—ã‹ã‚»ãƒƒãƒˆã§ããªã„ã“ã¨ã§ã™ã€‚é–¢æ•°å‘¼ã³å‡ºã—çµæœã‚„ã€å®Ÿè¡Œæ™‚ã«è©•ä¾¡ã•ã‚Œã‚‹å€¤ã«ã¯ã‚»ãƒƒãƒˆã§ãã¾ã›ã‚“ã€‚
* å®šæ•°ã¯ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒèµ°ã‚‹æœŸé–“ã€å®šç¾©ã•ã‚ŒãŸã‚¹ã‚³ãƒ¼ãƒ—å†…ã§ãšã£ã¨æœ‰åŠ¹

## ãƒ«ãƒ¼ãƒ—

``` rust
loop {
    ãƒ»ãƒ»ãƒ»
}
```

## ã‚¨ãƒ©ãƒ¼å‡¦ç†

ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã£ã¦Resultå‹ãŒè¿”ã•ã‚Œã‚‹ã®ã§ã€ãã‚Œã‚’```expect```ç­‰ã§å–å¾—ã™ã‚‹ã€‚
ä»¥ä¸‹ioãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã®ä¾‹

``` rust
use std::io

io::stdin().read_line(&mut guess).expect("è¡Œã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ");
```

ioãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã¯io::Resultã®å‹ã§è¿”ã£ã¦ãã‚‹ã€‚ã“ã®ã¨ãio::Resultã¯åˆ—æŒ™å‹ã¨ãªã‚‹ã€‚å¤§ä½“åˆ—æŒ™å‹ã¿ãŸã„ã ã‘ã©ã€‚
åˆ—æŒ™å­ã¯Okã‹Errã€‚
ioãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®io::Resultå‹ã¯expectãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Šã€Errã®å ´åˆã«å‘¼ã³å‡ºã›ã°ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã•ã›æ­¢ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

ä¾‹ãˆã°ã€æ–‡å­—åˆ—ã‹ã‚‰æ•°å€¤ã®å¤‰æ›ã¯ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã•ã›ã‚‹å ´åˆã¨ã•ã›ãªã„å ´åˆã§ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´å¯èƒ½ã€‚

* ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹

``` rust
let guess: u32 = guess.trim().parse().expect("æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼");
```

* ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ãªã„
``` rust
let guess: u32 = match guess.trim().parse() {   // å¤‰æ•°guessã‚’u32å‹ã«å¤‰æ›ã€parse()ã®çµæœã‚’matchã§å‡¦ç†
    Ok(num) => num,                             // æˆåŠŸã—ãŸå ´åˆã€numã‚’è¿”ã™
    Err(_) => continue,                         // å¤±æ•—ã—ãŸå ´åˆã€ãƒ«ãƒ¼ãƒ—ã®å…ˆé ­ã«æˆ»ã‚‹
};
```

## ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°

* å¤‰æ•°ã®å†å®£è¨€ãŒå¯èƒ½
  * å¿…ãšletã§åŒã˜å¤‰æ•°åã§ä½¿ã†ã“ã¨ã€‚letã§å†å®£è¨€ã—ãªã„ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
  * ãŸã ã—mutã«ã—ã¦ã„ã‚‹ã®ã¨ã¯é•ã£ã¦ã€è¦†ã„éš ã—ã¦ã„ã‚‹ã€‚è¦†ã„éš ã™ã“ã¨ã§ã‚¹ã‚³ãƒ¼ãƒ—ã‚’æŠœã‘ãŸã‚‰ã‚¹ã‚³ãƒ¼ãƒ—å†…ã§è¡Œã£ãŸã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°ã¯æ¶ˆãˆã‚‹ã€‚([ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°ã®ã‚¹ã‚³ãƒ¼ãƒ—](#ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°ã®ã‚¹ã‚³ãƒ¼ãƒ—))
* å®Ÿè³ªæ–°ã—ã„å¤‰æ•°ã‚’ç”Ÿæˆã—ã¦ã„ã‚‹ã“ã¨ã«ãªã‚‹ã®ã§å‹ã‚’å¤‰ãˆãªãŒã‚‰åŒã˜å¤‰æ•°åã‚’ä½¿ã„ã¾ã‚ã›ã‚‹ã€‚

``` rust
let mut guess = String::new();

let guess: u32 = guess.trim().parse().expect("Err");
```

* å¯å¤‰guessã§å®£è¨€ã—ã¦ã‚‹ãŒã€ã‚ã¨ã‹ã‚‰ä¸å¤‰guessã§å†å®£è¨€ã—ã¦ã„ã‚‹ã€‚
* å‹å¤‰æ›æ™‚ã«ã‚ˆãä½¿ã†ã‚‰ã—ã„ã€‚**ä¸Šè¨˜ã®ä¾‹ã ã¨stringå‹ã‹ã‚‰u32ã®æ•°å€¤ã«ãªã£ã¦ã„ã‚‹ã€‚**
* ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°ã§å†å®£è¨€ã™ã‚‹ã“ã¨ã‚’**2ç•ªç›®ã®å¤‰æ•°ã«è¦†ã„éš ã•ã‚ŒãŸ**ã¨ã„ã†ã‚‰ã—ã„ã€‚è‹±èªã®ç›´è¨³ã ã‹ã‚‰ã‚ã£ã¦ã‚‹ã‹ï¼Ÿ

### ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°ã®ã‚¹ã‚³ãƒ¼ãƒ—

* å¤‰æ•°ã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚’åˆ©ç”¨ã—ã¦ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚‚ä½¿ãˆã‚‹

``` rust
fn main() {
    let x = 5;
    let x = x + 1;          //ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°ã§å…ƒã®x=5ã«1ã‚’åŠ ãˆã¦x=6ã«ãªã‚‹

    {                       // ã‚¹ã‚³ãƒ¼ãƒ—ã‚’åŒºåˆ‡ã‚‹
        let x = x * 2;      //6ã‚’äºŒå€ã™ã‚‹
        println!("The value of x in the inner scope is: {}", x);
    }                       // ã“ã“ã§x=x*2ã®ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°ã¯çµ‚äº†ã—ã€x=6ã«æˆ»ã‚‹

    // x=6ãŒå‡ºåŠ›ã•ã‚Œã‚‹
    println!("The value of x is: {}", x);
}
```

## ãƒ‡ãƒ¼ã‚¿å‹ã«ã¤ã„ã¦

* **Rustã¯é™çš„å‹ä»˜è¨€èªã§ã‚ã‚‹**
* å¤‰æ•°ã«å‹ãŒãªãã¦ã‚‚å‹æ¨è«–ã¯åƒããŒã€è¤‡é›‘ãªå‹ãŒæ¨è«–ã•ã‚Œã‚‹å ´åˆã¯å‹æ³¨é‡ˆã‚’ã¤ã‘ãªã„ã¨ã ã‚ã€‚
  * ä»¥ä¸‹ã¯å‹æ³¨é‡ˆ(: u32)ãŒãªã„ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã€‚

  ``` rust
  let guess: u32 = "42".parse().expect("Not a number!");
  ```

### ã‚¹ã‚«ãƒ©ãƒ¼å‹

#### æ•´æ•°å‹

* ã“ã‚Œã¯Cè¨€èªã¨åŒã˜ã§ã—ã‚‡ã†ã€‚

|å¤§ãã•|ç¬¦å·ä»˜ã|ç¬¦å·ãªã—|
|--|--|--|
|8-bit|i8|u8|
|16-bit|i16|u16|
|32-bit|i32|u32|
|64-bit|i64|u64|
|arch|isize|usize|

* Rustã®æ•°å€¤ãƒªãƒ†ãƒ©ãƒ«
  * ãƒã‚¤ãƒˆãƒªãƒ†ãƒ©ãƒ«ã‚’é™¤ãæ•°å€¤ãƒªãƒ†ãƒ©ãƒ«ã¯å…¨ã¦ã€ å‹æ¥å°¾è¾(ä¾‹ãˆã°ã€57u8)ã¨_ã‚’è¦‹ãŸç›®ã®åŒºåˆ‡ã‚Šè¨˜å·(ä¾‹ãˆã°ã€1_000)ã«ä»˜åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

|æ•°å€¤ãƒªãƒ†ãƒ©ãƒ«|ä¾‹|
|--|--|
|10é€²æ•°|98_222|
|16é€²æ•°|0xff|
|8é€²æ•°|0o77|
|2é€²æ•°|0b1111_0000|
|ãƒã‚¤ãƒˆ (u8ã ã‘)|b'A'|

#### æµ®å‹•å°æ•°ç‚¹

* Rustã®æµ®å‹•å°æ•°ç‚¹å‹ã¯ã€f32ã¨f64ã§ã€ãã‚Œãã‚Œ32ãƒ“ãƒƒãƒˆã¨64ãƒ“ãƒƒãƒˆã‚µã‚¤ã‚ºã§ã™ã€‚åŸºæº–å‹ã¯f64ã§ã™ã€‚ ãªãœãªã‚‰ã€ç¾ä»£ã®CPUã§ã¯ã€f32ã¨ã»ã¼åŒã‚¹ãƒ”ãƒ¼ãƒ‰ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€ã‚ˆã‚Šç²¾åº¦ãŒé«˜ããªã‚‹ã‹ã‚‰ã§ã™ã€‚
  * æµ®å‹•å°æ•°ç‚¹æ•°ã¯ã€IEEE-754è¦æ ¼ã«å¾“ã£ã¦è¡¨ç¾ã•ã‚Œã¦ã„ã¾ã™ã€‚f32ãŒå˜ç²¾åº¦æµ®å‹•å°æ•°ç‚¹æ•°ã€ f64ãŒå€ç²¾åº¦æµ®å‹•å°æ•°ç‚¹æ•°ã§ã™ã€‚

``` rust
fn main() {
    let x = 2.0; // f64

    let y: f32 = 3.0; // f32
}
```

#### æ•°å€¤æ¼”ç®—

* åŸºæœ¬ã¯åŒã˜ã‹ãª
* å…¨éƒ¨ã¯[ã“ã‚Œ](https://doc.rust-jp.rs/book-ja/appendix-02-operators.html)

``` rust
fn main() {
    // addition
    // è¶³ã—ç®—
    let sum = 5 + 10;

    // subtraction
    // å¼•ãç®—
    let difference = 95.5 - 4.3;

    // multiplication
    // æ›ã‘ç®—
    let product = 4 * 30;

    // division
    // å‰²ã‚Šç®—
    let quotient = 56.7 / 32.2;
    let floored = 2 / 3; // Results in 0
                         // çµæœã¯0

    // remainder
    // ä½™ã‚Š
    let remainder = 43 % 5;
}
```

#### è«–ç†å€¤å‹

* ```true```ã¨```false```
*  Rustã®è«–ç†å€¤å‹ã¯ã€boolã¨æŒ‡å®šã•ã‚Œã¾ã™ã€‚

``` rust
fn main() {
    let t = true;

    let f: bool = false; // with explicit type annotation
                         // æ˜ç¤ºçš„å‹æ³¨é‡ˆä»˜ãã§
}
```

#### æ–‡å­—å‹

* Rustã®charå‹ã¯ã€ è¨€èªã®æœ€ã‚‚åŸºæœ¬çš„ãªã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆå‹ã§ã‚ã‚Šã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§ãã®ä½¿ç”¨æ–¹æ³•ã®ä¸€ä¾‹ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ (charã¯ã€ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‚¯ã‚’ä½¿ç”¨ã™ã‚‹æ–‡å­—åˆ—ã«å¯¾ã—ã¦ã€ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã§æŒ‡å®šã•ã‚Œã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚)
* Rustã®charå‹ã¯ã€**ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ‰**ã®ã‚¹ã‚«ãƒ©ãƒ¼å€¤ã‚’è¡¨ã—ã¾ã™ã€‚

``` rust
fn main() {
    let c = 'z';
    let z = 'â„¤';
    let heart_eyed_cat = 'ğŸ˜»';    //ãƒãƒ¼ãƒˆç›®ã®çŒ«
}
```

#### è¤‡åˆå‹

* ã‚¿ãƒ—ãƒ«ã¨é…åˆ—

##### ã‚¿ãƒ—ãƒ«

* è¤‡æ•°ã®å‹ã®ä½•ã‚‰ã‹ã®å€¤ã‚’ä¸€ã¤ã®è¤‡åˆå‹ã«ã¾ã¨ã‚ä¸Šã’ã‚‹æ‰‹æ®µã§ã™ã€‚
* ã‚¿ãƒ—ãƒ«ã¯ã€ä¸¸ã‹ã£ã“ã®ä¸­ã«ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã®å€¤ãƒªã‚¹ãƒˆã‚’æ›¸ãã“ã¨ã§ç”Ÿæˆã—ã¾ã™ã€‚ã‚¿ãƒ—ãƒ«ã®ä½ç½®ã”ã¨ã«å‹ãŒã‚ã‚Šã€ **ã‚¿ãƒ—ãƒ«å†…ã®å€¤ã¯ãã‚Œãã‚Œå…¨ã¦ãŒåŒã˜å‹ã§ã‚ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚**

``` rust
fn main() {
    let tup: (i32, f64, u8) = (500, 6.4, 1);
}
```

###### å€‹ã€…ã®å€¤ã®å–ã‚Šå‡ºã—

* åˆ†é…

``` rust
fn main() {
    let tup = (500, 6.4, 1);                // ã‚¿ãƒ—ãƒ«ç”Ÿæˆ
    let (x, y, z) = tup;                    // å€‹åˆ¥ã®å¤‰æ•°ã«å¤‰æ›
    println!("The value of y is: {}", y);   // yã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
}
```

* ãƒ”ãƒªã‚ªãƒ‰ã§æ·»ãˆå­—
  * æ·»ãˆå­—ã¯0å§‹ã¾ã‚Š
``` rust
fn main() {
    let x: (i32, f64, u8) = (500, 6.4, 1);      // ã‚¿ãƒ—ãƒ«ã‚’å¤‰æ•°xã§å®£è¨€
    let five_hundred = x.0;                     // 0ç•ªç›®ã«ã‚¢ã‚¯ã‚»ã‚¹
    let six_point_four = x.1;                   // 1ç•ªç›®ã«ã‚¢ã‚¯ã‚»ã‚¹
    let one = x.2;                              // 2ç•ªç›®ã«ã‚¢ã‚¯ã‚»ã‚¹
}
```

##### é…åˆ—

* è€ƒãˆæ–¹ã¯ã‚¿ãƒ—ãƒ«ã¨åŒã˜
* ã‚¿ãƒ—ãƒ«ã¨ç•°ãªã‚Šã€é…åˆ—ã®å…¨è¦ç´ ã¯ã€ åŒã˜å‹ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚
* Rustã®é…åˆ—ã¯ã€ä»–ã®è¨€èªã¨ç•°ãªã£ã¦ã„ã¾ã™ã€‚Rustã®é…åˆ—ã¯ã€ å›ºå®šé•·ãªã®ã§ã™: ä¸€åº¦å®£è¨€ã•ã‚ŒãŸã‚‰ã€ã‚µã‚¤ã‚ºã‚’ä¼¸ã°ã™ã“ã¨ã‚‚ç¸®ã‚ã‚‹ã“ã¨ã‚‚ã§ãã¾ã›ã‚“ã€‚
* é…åˆ—ã«å…¥ã‚Œã‚‹è¦ç´ ã¯ã€è§’ã‹ã£ã“å†…ã«ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šãƒªã‚¹ãƒˆã¨ã—ã¦è¨˜è¿°ã—ã¾ã™ã€‚(ã™ã¹ã¦åŒã˜å€¤ãªã‚‰[å€¤; é…åˆ—é•·ã•]ã§ç°¡æ½”åŒ–ã§ãã‚‹)
* **é…åˆ—ã¯ã€ãƒ’ãƒ¼ãƒ—ã‚ˆã‚Šã‚‚ã‚¹ã‚¿ãƒƒã‚¯ã«ãƒ‡ãƒ¼ã‚¿ã®ãƒ¡ãƒ¢ãƒªã‚’ç¢ºä¿ã—ãŸã„æ™‚ã€ ã¾ãŸã¯ã€å¸¸ã«å›ºå®šé•·ã®è¦ç´ ãŒã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ãŸã„æ™‚ã«æœ‰åŠ¹ã§ã™ã€‚**

``` rust
fn main() {
    let a = [1, 2, 3, 4, 5];                    // å‹æ³¨é‡ˆãªã—ï¼ˆæ¨è«–ï¼‰
    let a: [i32; 5] = [1, 2, 3, 4, 5];          // å‹æ³¨é‡ˆã‚ã‚Š
    let a = [3; 5];                             // ç°¡å˜ãªåˆæœŸåŒ–(let a = [3, 3, 3, 3, 3];ã¨åŒç­‰)
}
```

###### é…åˆ—ã®ã‚¢ã‚¯ã‚»ã‚¹

* ã“ã“ã‚‰è¾ºã¯ä»–ã¨åŒã˜

``` rust
fn main() {
    let a = [1, 2, 3, 4, 5];

    let first = a[0];
    let second = a[1];
}
```

###### é…åˆ—è¦ç´ ã¸ã®ç„¡åŠ¹ãªã‚¢ã‚¯ã‚»ã‚¹

* é…åˆ—ã®çµ‚ç«¯ã‚’è¶…ãˆã¦ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã¯é€šã‚‹ãŒã€å®Ÿè¡Œæ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹

``` rust
use std::io;

fn main() {
    let a = [1, 2, 3, 4, 5];

    println!("Please enter an array index.");
           // é…åˆ—ã®ä½•ç•ªç›®ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã‹æŒ‡å®šã—ã¦ãã ã•ã„

    let mut index = String::new();

    io::stdin()
        .read_line(&mut index)
        .expect("Failed to read line");
              // å€¤ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ

    let index: usize = index
        .trim()
        .parse()
        .expect("Index entered was not a number");
        ã€€ã€€ã€€// å…¥åŠ›ã•ã‚ŒãŸå€¤ã¯æ•°å­—ã§ã¯ã‚ã‚Šã¾ã›ã‚“

    let element = a[index];

    println!(
        "The value of the element at index {} is: {}",
        // {}ç•ªç›®ã®è¦ç´ ã®å€¤ã¯{}ã§ã™
        index, element
    );
}
```

indexã«5ä»¥ä¸Šã®å€¤ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹

``` text
thread 'main' panicked at 'index out of bounds: the len is 5 but the index is 10', src/main.rs:19:19
ã‚¹ãƒ¬ãƒƒãƒ‰'main'ã¯'ç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹: é•·ã•ã¯5ã§ã™ãŒã€æ·»ãˆå­—ã¯10ã§ã—ãŸ', src/main.rs:19:19
ã§ãƒ‘ãƒ‹ãƒƒã‚¯ã—ã¾ã—ãŸ
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
```

ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã§ã¯ä½•ã‚‚ã‚¨ãƒ©ãƒ¼ãŒå‡ºãªã‹ã£ãŸã‚‚ã®ã®ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ã«é™¥ã‚Šã€ æ­£å¸¸çµ‚äº†ã—ã¾ã›ã‚“ã§ã—ãŸã€‚è¦ç´ ã«æ·»ãˆå­—ã‚¢ã‚¯ã‚»ã‚¹ã‚’è©¦ã¿ã‚‹ã¨ã€è¨€èªã¯ã€ æŒ‡å®šã•ã‚ŒãŸãã®æ·»ãˆå­—ãŒé…åˆ—é•·ã‚ˆã‚Šã‚‚å°ã•ã„ã‹ã‚’ç¢ºèªã—ã¦ãã‚Œã¾ã™ã€‚æ·»ãˆå­—ãŒé…åˆ—é•·ã‚ˆã‚Šã‚‚å¤§ãã‘ã‚Œã°ã€è¨€èªã¯ãƒ‘ãƒ‹ãƒƒã‚¯ã—ã¾ã™ã€‚ ãƒ‘ãƒ‹ãƒƒã‚¯ã¨ã¯ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒã‚¨ãƒ©ãƒ¼ã§çµ‚äº†ã—ãŸã“ã¨ã‚’è¡¨ã™Rustç”¨èªã§ã™ã€‚

ã“ã‚Œã¯ã€å®Ÿéš›ã«ç¨¼åƒã—ã¦ã„ã‚‹Rustã®å®‰å…¨æ©Ÿæ§‹ã®æœ€åˆã®ä¾‹ã«ãªã‚Šã¾ã™ã€‚ä½ãƒ¬ãƒ™ãƒ«è¨€èªã®å¤šãã§ã¯ã€ ã“ã®ç¨®ã®ãƒã‚§ãƒƒã‚¯ã¯è¡Œã‚ã‚Œãªã„ãŸã‚ã€é–“é•ã£ãŸæ·»ãˆå­—ã‚’ä¸ãˆã‚‹ã¨ã€ç„¡åŠ¹ãªãƒ¡ãƒ¢ãƒªã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¦ã—ã¾ã„ã¾ã™ã€‚ Rustã§ã¯ã€ãƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã€å‡¦ç†ã‚’ç¶™ç¶šã™ã‚‹ä»£ã‚ã‚Šã«å³åº§ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’çµ‚äº†ã™ã‚‹ã“ã¨ã§ã€ ã“ã®ç¨®ã®ã‚¨ãƒ©ãƒ¼ã‹ã‚‰ãƒ—ãƒ­ã‚°ãƒ©ãƒã‚’ä¿è­·ã—ã¦ã„ã¾ã™ã€‚

## é–¢æ•°ã«ã¤ã„ã¦

- ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ(ãƒ—ãƒ­ã‚°ãƒ©ãƒ å®Ÿè¡Œæ™‚ã«æœ€åˆã«èµ°ã‚‹é–¢æ•°ã®ã“ã¨)ï¼šmain
- å‘½åè¦å‰‡ï¼šã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹(ä¾‹ï¼š some_variable)
- é–¢æ•°ã®ä½ç½®ï¼šã©ã“ã§ã‚‚å¤§ä¸ˆå¤«(Cè¨€èªã¿ãŸã„ã«ä¸‹ã«ã„ã‚‹ã‹ã‚‰å‚ç…§ã§ããªã„ã¨ã‹ãªã„)
- æˆ»ã‚Šå€¤ã«ã¤ã„ã¦ã¯é–¢æ•°æœ¬ä½“ã®ãƒ–ãƒ­ãƒƒã‚¯ã®æœ€å¾Œã®å¼ï¼ˆ;(ã‚»ãƒŸã‚³ãƒ­ãƒ³)ãŒãªã„ï¼‰ã¨åŒç¾©ã€‚ã“ã“ã¯[æ–‡ã¨å¼](#æ–‡ã¨å¼)å‚ç…§ã€‚
  - é–¢æ•°é€”ä¸­ã§returnã‚’ä½¿ã†ã“ã¨ã‚‚å¯èƒ½ã€‚
- è¨˜è¿°ä¾‹

    ``` rust
    //fn é–¢æ•°(å¼•æ•°ï¼‘: å‹, å¼•æ•°ï¼’: å‹...) -> æˆ»ã‚Šå€¤ã®å‹ {
        // å‡¦ç†
    //}
    fn plus(x: i32, y: i32) -> i32 {
        x + y
    }
    ```

- èˆˆå‘³æ·±ã„ä¾‹
  - é–¢æ•°fiveã¯å•é¡Œãªã„é–¢æ•°ã€‚5ã‚’è¿”ã™ã‹ã‚‰5ã—ã‹ãªã„ã€‚

    ``` rust
    fn five() -> i32 {
        5
    }

    fn main() {
        let x = five();

        println!("The value of x is: {}", x);
    }
    ```

### æ–‡ã¨å¼

- Rustã¯æ–‡ã¨å¼ã‚’æ˜ç¢ºã«åŒºåˆ¥ã™ã‚‹
  - æ–‡(statement)ï¼šãªã‚“ã‚‰ã‹ã®å‹•ä½œã‚’ã—ã¦å€¤ã‚’è¿”ã•ãªã„å‘½ä»¤ã€‚
    - çµ‚ç«¯ã«ã‚»ãƒŸã‚³ãƒ­ãƒ³ãŒã¤ã
  - å¼(expression)ï¼šçµæœå€¤ã«è©•ä¾¡ã•ã‚Œã‚‹
    - çµ‚ç«¯ã«ã‚»ãƒŸã‚³ãƒ­ãƒ³ã¯ã¤ã‹ãªã„
- åŸºæœ¬æ§‹æ–‡ã¯ä»¥ä¸‹(è‡ªåˆ†ãªã‚Šã®è§£é‡ˆ)
  - ```let å€¤ = å¼;``` å…¨ä½“ã§æ–‡
  - ```let y = i + 1;``` i+1ã¯yã¨ã„ã†çµæœå€¤ã‚’æŸç¸›ã™ã‚‹å¼ã§ã‚ã‚Šã€å…¨ä½“ã§ã¯ä½•ã‚‚å€¤ã‚’è¿”ã•ãªã„å‘½ä»¤æ–‡
- ä»¥ä¸‹ã®è¨˜è¿°ã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹

    ``` rust
    fn main() {
        let x = (let y = 6);
    }
    ```

  - ã“ã®```let y = 6```ã¨ã„ã†æ–‡ã¯å€¤ã‚’è¿”ã•ãªã„ã®ã§ã€xã«æŸç¸›ã™ã‚‹ã‚‚ã®ãŒãªã„ã€‚
  - Cã‚„Rubyãªã©ã®è¨€èªã¨ã¯ç•°ãªã‚‹å‹•ä½œã§ã€Cã‚„Rubyã§ã¯ä»£å…¥ã¯ä»£å…¥å€¤ã‚’è¿”ã—ã¾ã™ã€‚
    - ã“ã‚Œã‚‰ã®è¨€èªã§ã¯```x = y = 6```ã¨æ›¸ã„ã¦ã€xã‚‚yã‚‚å€¤6ã«ãªã‚‹ã‚ˆã†ã«ã§ãã‚‹ãŒã€Rustã«ãŠã„ã¦ã¯ã§ããªã„ã€‚
  - ã‚¨ãƒ©ãƒ¼å†…å®¹ã¯ä»¥ä¸‹

    ``` text
    $ cargo run
    Compiling functions v0.1.0 (file:///projects/functions)
    error: expected expression, found statement (`let`)
    (ã‚¨ãƒ©ãƒ¼: å¼ã‚’äºˆæœŸã—ã¾ã—ãŸãŒã€æ–‡ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ (`let`))
    --> src/main.rs:2:14
    |
    2 |     let x = (let y = 6);
    |              ^^^^^^^^^
    |
    = note: variable declaration using `let` is a statement
        (æ³¨é‡ˆ: `let`ã‚’ä½¿ã†å¤‰æ•°å®£è¨€ã¯ã€æ–‡ã§ã™)

    error[E0658]: `let` expressions in this position are experimental
    --> src/main.rs:2:14
    |
    2 |     let x = (let y = 6);
    |              ^^^^^^^^^
    |
    = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information
    = help: you can write `matches!(<expr>, <pattern>)` instead of `let <pattern> = <expr>`

    warning: unnecessary parentheses around assigned value
    --> src/main.rs:2:13
    |
    2 |     let x = (let y = 6);
    |             ^         ^
    |
    = note: `#[warn(unused_parens)]` on by default
    help: remove these parentheses
    |
    2 -     let x = (let y = 6);
    2 +     let x = let y = 6;
    | 

    For more information about this error, try `rustc --explain E0658`.
    warning: `functions` (bin "functions") generated 1 warning
    error: could not compile `functions` due to 2 previous errors; 1 warning emitted
    ```

    - é–¢æ•°å‘¼ã³å‡ºã—ã‚‚å¼ã€ãƒã‚¯ãƒ­å‘¼ã³å‡ºã—ã‚‚å¼ã€ æ–°ã—ã„ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä½œã‚‹éš›ã«ä½¿ç”¨ã™ã‚‹ãƒ–ãƒ­ãƒƒã‚¯({})ã‚‚å¼
    - ä»¥ä¸‹ã¯ãƒ–ãƒ­ãƒƒã‚¯ã®ä¾‹ã€‚
        ``` rust
        fn main() {
            let y = {
                let x = 3;
                x + 1
            };

            println!("The value of y is: {}", y);
        }
        ```
    - ```x+1```ã¯çµ‚ç«¯ã«ã‚»ãƒŸã‚³ãƒ­ãƒ³ãŒãªã„ã®ã§ã€æˆ»ã‚Šå€¤ã®å¼ã§ã‚ã‚‹ã€‚
    - ã“ã®æ™‚```x+1```ã«ã‚»ãƒŸã‚³ãƒ­ãƒ³ã‚’ã¤ã‘ãŸå ´åˆã€æ–‡ã¨ãªã£ã¦ã—ã¾ã„ãªã«ã‚‚æˆ»ã•ãªã„ã“ã¨ã¨ãªã‚‹ã®ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ§‹æ–‡

### ã‚¯ã‚¨ã‚¹ãƒãƒ§ãƒ³ãƒãƒ¼ã‚¯(?)

- copilotã«èã„ã¦ã¿ãŸ

``` text
rustã®æ§‹æ–‡ã¨ã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ•°ã«?ãŒã‚ã‚‹ã®ã¯ã€nullã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ
let record = result?;
```

å›ç­”

``` text
ã„ã„ãˆã€? ã¯ null ãƒã‚§ãƒƒã‚¯ã§ã¯ãªãã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ¼”ç®—å­ã§ã™ã€‚

ç°¡å˜ãªèª¬æ˜ï¼š

result? ã¯ã€Œresult ãŒ Err ãªã‚‰é–¢æ•°ã‚’æŠœã‘ã¦å‘¼ã³å‡ºã—å…ƒã«ãã®ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ã€Ok ãªã‚‰ä¸­èº«ã‚’å–ã‚Šå‡ºã—ã¦ç¶šè¡Œã€ã¨ã„ã†æ„å‘³ã€‚
null ãƒã‚§ãƒƒã‚¯ã§ã¯ãªãã€Result<T, E> å‹ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†ç”¨ã§ã™ã€‚
ã‚³ãƒ¼ãƒ‰ä¾‹ã§èª¬æ˜ï¼š
let record = result?;  // result ãŒ Err ãªã‚‰é–¢æ•°çµ‚äº†ï¼†ã‚¨ãƒ©ãƒ¼è¿”å´ã€Ok ãªã‚‰ record ã«å€¤ã‚’ä»£å…¥

ä¸Šè¨˜ã¯ä»¥ä¸‹ã¨åŒç­‰ï¼š
let record = match result {
    Ok(val) => val,
    Err(err) => return Err(err),
};

ã‚ãªãŸã®ã‚³ãƒ¼ãƒ‰ main.rs ã®å ´åˆï¼š

rdr.records() ã¯ Iterator<Item = Result<StringRecord, csv::Error>> ã‚’è¿”ã™ã€‚
for result in rdr.records() ã§ result ã¯ Result å‹ã€‚
let record = result?; ã§ã‚¨ãƒ©ãƒ¼ãªã‚‰å³åº§ã« example() é–¢æ•°ã‹ã‚‰å‡ºã¦ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ã€æˆåŠŸãªã‚‰ record ã« StringRecord ãŒå…¥ã‚‹ã€‚

? ã¯ Rust ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ä¾¿åˆ©ãªè¨˜æ³•ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒç„¡ã„å ´åˆã‚„ CSV å½¢å¼ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã¨è‡ªå‹•ã§ãã“ã§é–¢æ•°çµ‚äº†ã—ã¾ã™ã€‚
```

ä½¿ç”¨ã—ãŸã‚³ãƒ¼ãƒ‰(CSVèª­ã¿è¾¼ã¿)

``` rust
fn example() -> Result<(), Box<dyn Error>> {
    // Build the CSV reader and iterate over each record.
    let file = File::open("Organization_v3.csv")?;
    let mut rdr = csv::Reader::from_reader(file);
    for result in rdr.records() {
        // The iterator yields Result<StringRecord, Error>, so we check the
        // error here.
        let record = result?;
        let title = &record[0];
        println!("{}", title);
    }
    Ok(())
}
```

### unwrap()

- unwrapã¨ã„ã†ã®ã§ã‚‚ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå¯èƒ½ãã†
- ä»¥ä¸‹ã®é–¢æ•°ã§```read_dir()```ã®æˆ»ã‚Šå€¤ã«ã‚ˆã£ã¦å‡¦ç†ã‚’å¤‰ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚

``` rust
fn main() {
    let files = read_dir("./src").unwrap();
    for file in files {
        println!("{}", file.display());
    }
}
```

- copilotã•ã‚“ã ã¨ä»¥ä¸‹ã®å›ç­”

``` text
`read_dir("./src")` ã®æˆ»ã‚Šå€¤ã¯ `Result` ã§ã€`unwrap()` ã¯ãã‚ŒãŒ `Ok` ãªã‚‰ä¸­èº«ï¼ˆ`Vec<PathBuf>`ï¼‰ã‚’å–ã‚Šå‡ºã—ã€`Err` ãªã‚‰å³åº§ã« `panic!` ã‚’èµ·ã“ã—ã¦ç•°å¸¸çµ‚äº†ã•ã›ã¾ã™ã€‚
```

## ã‚¨ãƒ©ãƒ¼å‹

- ã‚ˆãé–¢æ•°ã®æˆ»ã‚Šã§ä»¥ä¸‹ã®è¨˜è¼‰ã‚’è¦‹ã‹ã‘ã‚‹

``` rust
Result<<,,,>, Box<dyn Error>>
```

- <,,,>å†…ã¯æ­£å¸¸ã«å‹•ä½œã—ãŸéš›ã®æˆ»ã‚Šå€¤ã®å‹
- Box<dyn Error>ãŒErrorãƒˆãƒ¬ã‚¤ã¨ã‚’å®Ÿè£…ã™ã‚‹ä»»æ„ã®å‹ã‚’ãƒ’ãƒ¼ãƒ—ä¸Šã«æ ¼ç´ã—ãŸã€Œã‚¹ãƒãƒ¼ãƒˆãƒã‚¤ãƒ³ã‚¿ã€ã§ã‚ã‚‹ã¨ã®ã“ã¨ã€‚(copilot)
- ä¸Šè¨˜ã®è¨˜è¼‰ã«ã‚ˆã£ã¦ã€å…·ä½“çš„ãªã‚¨ãƒ©ãƒ¼å‹ã‚’æŠ½è±¡åŒ–ã—ã€åŒä¸€ã®æˆ»ã‚Šå€¤ï¼ˆResult<â€¦, Box<dyn Error>>ï¼‰ã§æ§˜ã€…ãªå¤±æ•—ç†ç”±ã‚’æ‰±ãˆã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚